# pchan-bot

Бот для пересылки голосований, которые содержат "Анонс:" в тексте вопроса.

## Настройка

1. Создайте нового бота через [@BotFather](https://t.me/BotFather) и получите токен бота
2. Добавьте бота в исходные чаты (откуда нужно пересылать голосования)
3. Добавьте бота в целевой чат (куда будут пересылаться голосования)
4. Получите ID целевого чата:
   - Добавьте [@userinfobot](https://t.me/userinfobot) в целевой чат
   - Перешлите любое сообщение из целевого чата боту @userinfobot
   - Бот покажет ID чата
5. Скопируйте файл `.env.example` в `.env` и заполните:
   ```
   BOT_TOKEN=ваш_токен_бота
   TARGET_CHAT_ID=id_целевого_чата
   ```

## Запуск через Docker (рекомендуется)

1. Установите [Docker](https://docs.docker.com/get-docker/) и [Docker Compose](https://docs.docker.com/compose/install/)

2. Запустите бота:

   Dev режим (по умолчанию):

   ```bash
   docker compose up -d
   ```

   Prod режим:

   ```bash
   ENV_FILE=.env.prod docker-compose up -d
   ```

   С переопределением TARGET_CHAT_ID:

   ```bash
   docker compose up -d
   ```

   Для просмотра логов:

   ```bash
   docker compose logs -f
   ```

   Для остановки:

   ```bash
   docker-compose down
   ```

## Запуск без Docker

1. Установите зависимости:

   ```bash
   npm install
   ```

2. Запустите бота:
   ```bash
   npm run dev
   ```

## Использование

1. Добавьте бота как администратора в чаты, где создаются голосования
2. Бот будет автоматически пересылать в целевой чат все голосования, текст которых начинается с "Анонс:" (без учета регистра)
3. В консоли будут отображаться логи о пересылке голосований
